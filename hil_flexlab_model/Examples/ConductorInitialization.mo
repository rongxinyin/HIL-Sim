within hil_flexlab_model.Examples;
model ConductorInitialization "Test model for heat conductor initialization"
  extends Modelica.Icons.Example;
  Buildings.HeatTransfer.Sources.PrescribedTemperature
                                                  TB
    annotation (Placement(transformation(extent={{80,20},{60,40}})));
  Buildings.HeatTransfer.Sources.PrescribedTemperature TA
    annotation (Placement(transformation(extent={{-60,20},{-40,40}})));

  parameter Buildings.HeatTransfer.Data.Solids.Brick brick(x=0.18, nStaRef=3,
    nSta=5)
    annotation (Placement(transformation(extent={{18,72},{38,92}})));
  parameter Buildings.HeatTransfer.Data.Solids.InsulationBoard insulation(x=0.05, nStaRef=2,
    nSta=5)
    annotation (Placement(transformation(extent={{-20,72},{0,92}})));
  parameter Buildings.HeatTransfer.Data.OpaqueConstructions.Generic compositeWall(
      material={insulation,brick}, nLay=2)
    "Composite wall consisting of insulation and material"
    annotation (Placement(transformation(extent={{60,72},{80,92}})));

  Buildings.HeatTransfer.Conduction.MultiLayer conS1(
    A=2,
    steadyStateInitial=true,
    layers=compositeWall,
    stateAtSurface_a=false,
    stateAtSurface_b=false)
    annotation (Placement(transformation(extent={{-16,-18},{4,2}})));

  Modelica.Blocks.Sources.CombiTimeTable
                               combiTimeTable(table=[20649600,286.89; 20650500,
        286.92; 20651400,286.93; 20652300,286.91; 20653200,286.86; 20654100,
        286.78; 20655000,286.66; 20655900,286.53; 20656800,286.54; 20657700,
        286.59; 20658600,286.6; 20659500,286.57; 20660400,286.51; 20661300,
        286.44; 20662200,286.37; 20663100,286.29; 20664000,286.2; 20664900,
        286.14; 20665800,286.06; 20666700,285.94; 20667600,286; 20668500,286.18;
        20669400,286.26; 20670300,286.24; 20671200,286.18; 20672100,286.1;
        20673000,286.04; 20673900,286.06; 20674800,286.13; 20675700,286.17;
        20676600,286.25; 20677500,286.42; 20678400,286.77; 20679300,287.47;
        20680200,288.5; 20681100,289.7; 20682000,291.2; 20682900,292.66;
        20683800,294.41; 20684700,296.44; 20685600,298.23; 20686500,300.1;
        20687400,301.5; 20688300,302.53; 20689200,303.31; 20690100,303.74;
        20691000,303.97; 20691900,304.17; 20692800,304.38; 20693700,304.54;
        20694600,304.64; 20695500,304.73; 20696400,304.82; 20697300,304.93;
        20698200,304.99; 20699100,304.95; 20700000,304.69; 20700900,304.1;
        20701800,303.33; 20702700,302.56; 20703600,301.88; 20704500,301.2;
        20705400,300.51; 20706300,299.78; 20707200,299.01; 20708100,298.23;
        20709000,297.37; 20709900,296.57; 20710800,295.76; 20711700,294.98;
        20712600,294.49; 20713500,293.95; 20714400,293.3; 20715300,292.61;
        20716200,292.03; 20717100,291.47; 20718000,290.96; 20718900,290.5;
        20719800,290.09; 20720700,289.74; 20721600,289.47; 20722500,289.27;
        20723400,289.11; 20724300,288.98; 20725200,288.85; 20726100,288.73;
        20727000,288.61; 20727900,288.49; 20728800,288.34; 20729700,288.18;
        20730600,288; 20731500,287.84; 20732400,287.71; 20733300,287.62;
        20734200,287.56; 20735100,287.54; 20736000,287.6; 20736900,287.63;
        20737800,287.66; 20738700,287.69; 20739600,287.72; 20740500,287.76;
        20741400,287.79; 20742300,287.81; 20743200,287.82; 20744100,287.84;
        20745000,287.85; 20745900,287.84; 20746800,287.83; 20747700,287.81;
        20748600,287.79; 20749500,287.77; 20750400,287.75; 20751300,287.73;
        20752200,287.72; 20753100,287.71; 20754000,287.69; 20754900,287.61;
        20755800,287.49; 20756700,287.38; 20757600,287.3; 20758500,287.23;
        20759400,287.18; 20760300,287.2; 20761200,287.26; 20762100,287.36;
        20763000,287.52; 20763900,287.86; 20764800,288.38; 20765700,289.15;
        20766600,290.13; 20767500,291.08; 20768400,291.98; 20769300,293.03;
        20770200,293.93; 20771100,294.85; 20772000,295.65; 20772900,296.47;
        20773800,297.31; 20774700,297.91; 20775600,298.31; 20776500,298.57;
        20777400,298.78; 20778300,298.94; 20779200,299.09; 20780100,299.19;
        20781000,299.26; 20781900,299.29; 20782800,299.31; 20783700,299.34;
        20784600,299.34; 20785500,299.24; 20786400,298.99; 20787300,298.66;
        20788200,298.29; 20789100,297.85; 20790000,297.4; 20790900,296.96;
        20791800,296.52; 20792700,296.04; 20793600,295.55; 20794500,295.03;
        20795400,294.58; 20796300,294.12; 20797200,293.59; 20798100,293.11;
        20799000,292.8; 20799900,292.4; 20800800,291.99; 20801700,291.54;
        20802600,291.18; 20803500,290.81; 20804400,290.46; 20805300,290.15;
        20806200,289.86; 20807100,289.63; 20808000,289.48; 20808900,289.37;
        20809800,289.28; 20810700,289.19; 20811600,289.08; 20812500,288.97;
        20813400,288.85; 20814300,288.75; 20815200,288.66; 20816100,288.59;
        20817000,288.51; 20817900,288.42; 20818800,288.33; 20819700,288.25;
        20820600,288.18; 20821500,288.1; 20822400,288.08; 21427200,287.44;
        21428100,287.97; 21429000,288.33; 21429900,288.52; 21430800,288.58;
        21431700,288.63; 21432600,288.65; 21433500,288.59; 21434400,288.46;
        21435300,288.32; 21436200,288.17; 21437100,288.01; 21438000,287.84;
        21438900,287.64; 21439800,287.43; 21440700,287.23; 21441600,287.09;
        21442500,287.02; 21443400,287.01; 21444300,287.02; 21445200,287.11;
        21446100,287.32; 21447000,287.55; 21447900,287.68; 21448800,287.75;
        21449700,287.84; 21450600,287.91; 21451500,287.98; 21452400,288.06;
        21453300,288.18; 21454200,288.35; 21455100,288.57; 21456000,288.92;
        21456900,289.59; 21457800,291.36; 21458700,295.67; 21459600,299.01;
        21460500,300.67; 21461400,300.94; 21462300,302.09; 21463200,303.3;
        21464100,304.57; 21465000,305.41; 21465900,305.98; 21466800,306.43;
        21467700,307.1; 21468600,307.81; 21469500,308.43; 21470400,308.91;
        21471300,309.58; 21472200,310.18; 21473100,310.44; 21474000,309.95;
        21474900,308.69; 21475800,307.5; 21476700,306.73; 21477600,306.47;
        21478500,306.48; 21479400,306.47; 21480300,306.21; 21481200,305.55;
        21482100,304.68; 21483000,303.65; 21483900,302.46; 21484800,301.06;
        21485700,299.28; 21486600,297.6; 21487500,296.2; 21488400,295.12;
        21489300,294.21; 21490200,293.5; 21491100,293.06; 21492000,292.7;
        21492900,292.63; 21493800,292.61; 21494700,292.41; 21495600,291.93;
        21496500,291.31; 21497400,290.71; 21498300,290.15; 21499200,289.68;
        21500100,289.2; 21501000,288.73; 21501900,288.33; 21502800,288.15;
        21503700,288.29; 21504600,288.52; 21505500,288.61; 21506400,288.45;
        21507300,288.17; 21508200,287.85; 21509100,287.63; 21510000,287.59;
        21510900,287.58; 21511800,287.59; 21512700,287.65; 21513600,287.81;
        21514500,287.95; 21515400,288.12; 21516300,288.34; 21517200,288.43;
        21518100,288.16; 21519000,288.07; 21519900,288.05; 21520800,288.1;
        21521700,288.15; 21522600,288.25; 21523500,288.42; 21524400,288.28;
        21525300,287.94; 21526200,287.53; 21527100,287.21; 21528000,287.2;
        21528900,287.31; 21529800,287.44; 21530700,287.52; 21531600,287.56;
        21532500,287.62; 21533400,287.67; 21534300,287.68; 21535200,287.66;
        21536100,287.62; 21537000,287.57; 21537900,287.58; 21538800,287.78;
        21539700,288.18; 21540600,288.77; 21541500,289.42; 21542400,290.12;
        21543300,290.94; 21544200,291.8; 21545100,292.68; 21546000,293.6;
        21546900,294.67; 21547800,297.04; 21548700,302.14; 21549600,307.36;
        21550500,308.88; 21551400,307.77; 21552300,307.38; 21553200,307.81;
        21554100,308.63; 21555000,309.37; 21555900,309.5; 21556800,309.07;
        21557700,308.5; 21558600,308.1; 21559500,307.9; 21560400,307.67;
        21561300,307.3; 21562200,306.89; 21563100,306.59; 21564000,306.66;
        21564900,307.29; 21565800,307.96; 21566700,308.19; 21567600,307.39;
        21568500,305.49; 21569400,303.44; 21570300,301.95; 21571200,301.35;
        21572100,300.98; 21573000,300.53; 21573900,300.02; 21574800,299.36;
        21575700,298.65; 21576600,298.07; 21577500,297.62; 21578400,296.87;
        21579300,295.81; 21580200,294.58; 21581100,293.45; 21582000,292.6;
        21582900,291.77; 21583800,291.07; 21584700,290.55; 21585600,290.27;
        21586500,290.21; 21587400,290.19; 21588300,290.11; 21589200,289.88;
        21590100,289.55; 21591000,289.12; 21591900,288.76; 21592800,288.67;
        21593700,288.67; 21594600,288.65; 21595500,288.59; 21596400,288.51;
        21597300,288.46; 21598200,288.42; 21599100,288.38])
    annotation (Placement(transformation(extent={{-100,20},{-80,40}})));

  Modelica.Blocks.Sources.CombiTimeTable
                               combiTimeTable1(table=[20649600,291.88; 20650500,
        292.16; 20651400,292.31; 20652300,292.31; 20653200,292.25; 20654100,
        292.22; 20655000,292.18; 20655900,292.05; 20656800,291.92; 20657700,
        291.87; 20658600,291.82; 20659500,291.71; 20660400,291.59; 20661300,
        291.55; 20662200,291.5; 20663100,291.39; 20664000,291.28; 20664900,
        291.24; 20665800,291.2; 20666700,291.1; 20667600,290.99; 20668500,
        290.96; 20669400,290.91; 20670300,290.77; 20671200,290.61; 20672100,
        290.51; 20673000,290.4; 20673900,290.23; 20674800,290.09; 20675700,
        290.14; 20676600,290.39; 20677500,290.62; 20678400,290.8; 20679300,
        291.03; 20680200,291.26; 20681100,291.48; 20682000,291.8; 20682900,
        292.3; 20683800,292.89; 20684700,293.5; 20685600,294.22; 20686500,
        295.03; 20687400,295.8; 20688300,296.47; 20689200,297.06; 20690100,
        297.62; 20691000,298.1; 20691900,298.48; 20692800,298.79; 20693700,
        299.02; 20694600,299.16; 20695500,299.23; 20696400,299.24; 20697300,
        299.25; 20698200,299.25; 20699100,299.2; 20700000,299.16; 20700900,
        299.29; 20701800,299.53; 20702700,299.73; 20703600,299.8; 20704500,
        299.77; 20705400,299.64; 20706300,299.37; 20707200,299.04; 20708100,
        298.75; 20709000,298.44; 20709900,298.07; 20710800,297.68; 20711700,
        297.35; 20712600,297.06; 20713500,296.74; 20714400,296.4; 20715300,
        296.02; 20716200,295.61; 20717100,295.16; 20718000,294.74; 20718900,
        294.4; 20719800,294.1; 20720700,293.76; 20721600,293.44; 20722500,
        293.21; 20723400,293.01; 20724300,292.76; 20725200,292.5; 20726100,
        292.31; 20727000,292.14; 20727900,291.91; 20728800,291.69; 20729700,
        291.55; 20730600,291.42; 20731500,291.25; 20732400,291.11; 20733300,
        291.05; 20734200,291.01; 20735100,290.93; 20736000,292.12; 20736900,
        292.37; 20737800,292.5; 20738700,292.49; 20739600,292.42; 20740500,
        292.4; 20741400,292.37; 20742300,292.27; 20743200,292.18; 20744100,
        292.16; 20745000,292.14; 20745900,292.05; 20746800,291.96; 20747700,
        291.92; 20748600,291.89; 20749500,291.78; 20750400,291.66; 20751300,
        291.62; 20752200,291.58; 20753100,291.47; 20754000,291.37; 20754900,
        291.32; 20755800,291.26; 20756700,291.11; 20757600,290.96; 20758500,
        290.87; 20759400,290.79; 20760300,290.66; 20761200,290.58; 20762100,
        290.78; 20763000,291.24; 20763900,291.73; 20764800,292.28; 20765700,
        292.79; 20766600,293.2; 20767500,293.51; 20768400,293.87; 20769300,
        294.37; 20770200,294.9; 20771100,295.39; 20772000,295.9; 20772900,
        296.42; 20773800,296.92; 20774700,297.34; 20775600,297.71; 20776500,
        298.04; 20777400,298.31; 20778300,298.47; 20779200,298.57; 20780100,
        298.64; 20781000,298.69; 20781900,298.68; 20782800,298.61; 20783700,
        298.53; 20784600,298.46; 20785500,298.34; 20786400,298.21; 20787300,
        298.24; 20788200,298.4; 20789100,298.54; 20790000,298.62; 20790900,
        298.65; 20791800,298.57; 20792700,298.37; 20793600,298.12; 20794500,
        297.89; 20795400,297.64; 20796300,297.34; 20797200,297.02; 20798100,
        296.76; 20799000,296.54; 20799900,296.28; 20800800,295.97; 20801700,
        295.66; 20802600,295.31; 20803500,294.94; 20804400,294.57; 20805300,
        294.28; 20806200,294.02; 20807100,293.71; 20808000,293.43; 20808900,
        293.23; 20809800,293.05; 20810700,292.82; 20811600,292.59; 20812500,
        292.42; 20813400,292.26; 20814300,292.06; 20815200,291.9; 20816100,
        291.8; 20817000,291.71; 20817900,291.56; 20818800,291.42; 20819700,
        291.36; 20820600,291.32; 20821500,291.21; 20822400,291.22; 21427200,
        291.99; 21428100,292.28; 21429000,292.48; 21429900,292.53; 21430800,
        292.52; 21431700,292.54; 21432600,292.54; 21433500,292.46; 21434400,
        292.35; 21435300,292.31; 21436200,292.25; 21437100,292.12; 21438000,
        291.98; 21438900,291.9; 21439800,291.83; 21440700,291.68; 21441600,
        291.53; 21442500,291.46; 21443400,291.4; 21444300,291.29; 21445200,
        291.19; 21446100,291.18; 21447000,291.18; 21447900,291.11; 21448800,
        291.02; 21449700,290.99; 21450600,290.94; 21451500,290.83; 21452400,
        290.78; 21453300,290.98; 21454200,291.34; 21455100,291.64; 21456000,
        292.04; 21456900,292.63; 21457800,293.22; 21458700,293.73; 21459600,
        294.42; 21460500,295.25; 21461400,296.04; 21462300,296.75; 21463200,
        297.47; 21464100,298.23; 21465000,298.93; 21465900,299.5; 21466800,
        299.98; 21467700,300.41; 21468600,300.76; 21469500,301.04; 21470400,
        301.3; 21471300,301.55; 21472200,301.74; 21473100,301.83; 21474000,
        301.8; 21474900,301.7; 21475800,301.51; 21476700,301.24; 21477600,
        301.02; 21478500,301.07; 21479400,301.32; 21480300,301.58; 21481200,
        301.7; 21482100,301.66; 21483000,301.5; 21483900,301.19; 21484800,
        300.81; 21485700,300.39; 21486600,299.92; 21487500,299.35; 21488400,
        298.78; 21489300,298.28; 21490200,297.84; 21491100,297.39; 21492000,
        296.95; 21492900,296.48; 21493800,296.04; 21494700,295.63; 21495600,
        295.23; 21496500,294.92; 21497400,294.62; 21498300,294.27; 21499200,
        293.93; 21500100,293.67; 21501000,293.42; 21501900,293.12; 21502800,
        292.81; 21503700,292.59; 21504600,292.4; 21505500,292.18; 21506400,
        291.98; 21507300,291.84; 21508200,291.71; 21509100,291.54; 21510000,
        291.39; 21510900,291.34; 21511800,291.31; 21512700,291.23; 21513600,
        292.17; 21514500,292.43; 21515400,292.59; 21516300,292.61; 21517200,
        292.58; 21518100,292.57; 21519000,292.53; 21519900,292.42; 21520800,
        292.31; 21521700,292.29; 21522600,292.27; 21523500,292.2; 21524400,
        292.11; 21525300,292.04; 21526200,291.94; 21527100,291.77; 21528000,
        291.61; 21528900,291.54; 21529800,291.51; 21530700,291.44; 21531600,
        291.38; 21532500,291.39; 21533400,291.38; 21534300,291.26; 21535200,
        291.12; 21536100,291.03; 21537000,290.94; 21537900,290.78; 21538800,
        290.66; 21539700,290.74; 21540600,291.03; 21541500,291.45; 21542400,
        291.95; 21543300,292.58; 21544200,293.09; 21545100,293.38; 21546000,
        293.66; 21546900,294.02; 21547800,294.42; 21548700,295.01; 21549600,
        295.96; 21550500,297.08; 21551400,298.02; 21552300,298.69; 21553200,
        299.26; 21554100,299.79; 21555000,300.27; 21555900,300.64; 21556800,
        300.93; 21557700,301.13; 21558600,301.22; 21559500,301.21; 21560400,
        301.13; 21561300,301.02; 21562200,300.88; 21563100,300.69; 21564000,
        300.56; 21564900,300.7; 21565800,301.07; 21566700,301.49; 21567600,
        301.81; 21568500,301.92; 21569400,301.78; 21570300,301.41; 21571200,
        300.99; 21572100,300.63; 21573000,300.3; 21573900,299.93; 21574800,
        299.57; 21575700,299.26; 21576600,298.99; 21577500,298.67; 21578400,
        298.32; 21579300,297.92; 21580200,297.46; 21581100,296.94; 21582000,
        296.42; 21582900,295.99; 21583800,295.58; 21584700,295.14; 21585600,
        294.74; 21586500,294.44; 21587400,294.19; 21588300,293.9; 21589200,
        293.61; 21590100,293.38; 21591000,293.15; 21591900,292.86; 21592800,
        292.59; 21593700,292.41; 21594600,292.27; 21595500,292.08; 21596400,
        291.93; 21597300,291.86; 21598200,291.81; 21599100,291.71])
    annotation (Placement(transformation(extent={{62,-72},{82,-52}})));
  Modelica.Blocks.Math.Add add(k2=-1)
    annotation (Placement(transformation(extent={{-16,-48},{4,-28}})));
  Modelica.Blocks.Sources.Constant const(k=2)
    annotation (Placement(transformation(extent={{-76,-68},{-56,-48}})));
equation
  connect(TA.port, conS1.port_a) annotation (Line(points={{-40,30},{-28,30},{
          -28,-8},{-16,-8}}, color={191,0,0}));
  connect(conS1.port_b, TB.port) annotation (Line(points={{4,-8},{34,-8},{34,30},
          {60,30}}, color={191,0,0}));
  connect(combiTimeTable.y[1], TA.T)
    annotation (Line(points={{-79,30},{-62,30}}, color={0,0,127}));
  connect(const.y, add.u2) annotation (Line(points={{-55,-58},{-36.5,-58},{
          -36.5,-44},{-18,-44}}, color={0,0,127}));
  connect(combiTimeTable.y[1], add.u1) annotation (Line(points={{-79,30},{-50,
          30},{-50,-32},{-18,-32}}, color={0,0,127}));
  connect(combiTimeTable1.y[1], TB.T)
    annotation (Line(points={{83,-62},{82,-62},{82,30}}, color={0,0,127}));
  annotation (Diagram(coordinateSystem(preserveAspectRatio=true, extent={{-100,
            -100},{100,100}}), graphics={Text(
          extent={{-60,50},{58,58}},
          lineColor={0,0,0},
          textString="Steady state initialization (dT(0)/dt=0)")}),
experiment(
      StartTime=21427200,
      StopTime=21513600,
      Interval=300,
      Tolerance=1e-06,
      __Dymola_Algorithm="Dassl"),
__Dymola_Commands(file="modelica://Buildings/Resources/Scripts/Dymola/HeatTransfer/Examples/ConductorInitialization.mos"
        "Simulate and plot"),
    Documentation(info="<html>
<p>
This example illustrates how to initialize heat conductors in steady state and with
predefined temperatures.
</p>
</html>", revisions="<html>
<ul>
<li>
September 9, 2014, by Michael Wetter:<br/>
Moved declaration of <code>compositeWall</code> due to a bug
in Dymola 2015 FD01 beta1.
</li>
<li>
March 6 2010, by Michael Wetter:<br/>
First implementation.
</li>
</ul>
</html>"));
end ConductorInitialization;
